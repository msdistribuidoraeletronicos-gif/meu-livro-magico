<!-- exemplos.html ‚Äî P√°gina de Exemplos (standalone) /exemplos -->
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Exemplos ‚Äî Meu Livro M√°gico</title>
  <meta name="description" content="Veja exemplos de livros prontos: capas e p√°ginas, estilos Leitura e Leitura + Colorir."/>

  <style>
    :root{
      --violet-50:#f5f3ff;
      --pink-50:#fff1f2;
      --white:#ffffff;
      --gray-900:#111827;
      --gray-800:#1f2937;
      --gray-600:#4b5563;
      --violet-600:#7c3aed;
      --violet-700:#6d28d9;
      --pink-600:#db2777;
      --pink-700:#be185d;
      --amber-500:#f59e0b;
      --violet-200:#ddd6fe;
      --shadow: 0 22px 55px rgba(124,58,237,.18);
      --shadow2: 0 12px 30px rgba(17,24,39,.10);

      /* usado pelo preview para dimensionar o "livro fechado" */
      --pad: 18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--gray-800);
      background: linear-gradient(180deg, var(--violet-50), var(--white) 46%, var(--pink-50));
      overflow-x:hidden;
    }
    a{ color:inherit; text-decoration:none; }
    .wrap{ max-width: 1100px; margin: 0 auto; padding: 0 16px; }

    /* Nav */
    .nav{
      padding: 16px 0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:1000;
      letter-spacing:-.2px;
    }
    .brand .logo{
      width:42px;height:42px;border-radius:14px;
      display:grid;place-items:center;
      background: linear-gradient(135deg, rgba(124,58,237,.14), rgba(219,39,119,.14));
      border: 1px solid rgba(124,58,237,.18);
      box-shadow: var(--shadow2);
      font-size:20px;
    }
    .navRight{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

    /* Buttons */
    .btn{
      border:0;
      cursor:pointer;
      user-select:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding: 14px 18px;
      border-radius: 999px;
      font-weight: 900;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease, opacity .15s ease;
      white-space:nowrap;
    }
    .btn:active{ transform: translateY(1px); }
    .btnPrimary{
      color:#fff;
      background: linear-gradient(90deg, var(--violet-600), var(--pink-600));
      box-shadow: 0 18px 40px rgba(124,58,237,.20);
    }
    .btnPrimary:hover{
      background: linear-gradient(90deg, var(--violet-700), var(--pink-700));
      box-shadow: 0 18px 46px rgba(124,58,237,.26);
    }
    .btnOutline{
      color: var(--violet-700);
      background: rgba(255,255,255,.78);
      border: 2px solid rgba(221,214,254,.95);
      box-shadow: 0 12px 26px rgba(17,24,39,.06);
    }
    .btnOutline:hover{
      background: rgba(245,243,255,.95);
      border-color: rgba(196,181,253,.95);
    }

    /* Hero */
    .hero{
      position:relative;
      overflow:hidden;
      padding: 26px 0 26px;
    }

    /* Stars */
    .stars{
      position:absolute; inset:0;
      pointer-events:none;
      overflow:hidden;
    }
    .star{
      position:absolute;
      width: 18px; height: 18px;
      opacity:.55;
      animation: floatY var(--dur, 4s) ease-in-out infinite;
      will-change: transform, opacity;
      filter: drop-shadow(0 10px 10px rgba(245,158,11,.10));
    }
    .star svg{ width:100%; height:100%; display:block; }
    @keyframes floatY{
      0%{ transform: translateY(0); opacity:.30; }
      50%{ transform: translateY(-18px); opacity:.65; }
      100%{ transform: translateY(0); opacity:.30; }
    }

    .head{
      text-align:center;
      position:relative;
      z-index:2;
      padding: 18px 0 10px;
    }
    .h1{
      margin: 10px 0 10px;
      font-size: 34px;
      line-height: 1.05;
      font-weight: 1000;
      letter-spacing: -1px;
    }
    @media (min-width: 768px){
      .h1{ font-size: 54px; }
    }
    .gradText{
      background: linear-gradient(90deg, var(--violet-600), var(--pink-600), var(--amber-500));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .lead{
      margin: 0 auto;
      max-width: 70ch;
      font-size: 18px;
      line-height: 1.65;
      color: var(--gray-600);
      font-weight: 750;
    }

    /* Grid de exemplos */
    .section{
      padding: 26px 0 70px;
      position:relative;
      z-index:2;
    }
    .filters{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin: 18px 0 22px;
    }
    .pill{
      padding: 10px 14px;
      border-radius: 999px;
      border: 2px solid rgba(221,214,254,.95);
      background: rgba(255,255,255,.75);
      font-weight: 900;
      color: rgba(109,40,217,1);
      box-shadow: 0 12px 26px rgba(17,24,39,.06);
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
    }
    .pill:hover{ transform: translateY(-1px); }
    .pill.active{
      background: rgba(245,243,255,.95);
      border-color: rgba(196,181,253,.95);
      box-shadow: 0 18px 34px rgba(124,58,237,.12);
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
      max-width: 980px;
      margin: 0 auto;
    }
    @media (min-width: 640px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }
    @media (min-width: 980px){
      .grid{ grid-template-columns: 1fr 1fr 1fr; }
    }

    .card{
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(17,24,39,.06);
      border-radius: 22px;
      overflow:hidden;
      box-shadow: 0 22px 55px rgba(17,24,39,.10);
      transition: transform .2s ease, box-shadow .2s ease;
      position:relative;
    }
    .card:hover{
      transform: translateY(-3px);
      box-shadow: 0 26px 70px rgba(17,24,39,.14);
    }

    .cover{
      aspect-ratio: 3 / 4;
      position:relative;
      background: linear-gradient(135deg, rgba(124,58,237,.22), rgba(219,39,119,.18));
    }
    .cover img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }
    .cover::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(700px 260px at 30% 15%, rgba(255,255,255,.18), transparent 58%),
        radial-gradient(900px 320px at 50% 100%, rgba(0,0,0,.30), transparent 62%);
      pointer-events:none;
    }

    .tag{
      position:absolute;
      top: 12px;
      left: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(255,255,255,.40);
      /* removido backdrop-filter para garantir zero blur */
      font-weight: 1000;
      font-size: 12px;
      color: rgba(17,24,39,.90);
      box-shadow: 0 12px 26px rgba(17,24,39,.14);
      z-index:2;
    }

    .body{
      padding: 14px 14px 16px;
    }
    .title{
      font-weight: 1000;
      letter-spacing: -.2px;
      margin: 0 0 6px;
      font-size: 16px;
      color: var(--gray-900);
    }
    .meta{
      margin:0;
      color: var(--gray-600);
      font-weight: 800;
      font-size: 13px;
      line-height: 1.45;
    }

    /* Bot√£o Abrir (por card) */
    .openRow{
      margin-top: 12px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .openBtn{
      border:0;
      cursor:pointer;
      user-select:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 1000;
      color:#fff;
      background: linear-gradient(90deg, var(--violet-600), var(--pink-600));
      box-shadow: 0 16px 34px rgba(124,58,237,.20);
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease, opacity .15s ease;
      width: 100%;
    }
    .openBtn:hover{
      background: linear-gradient(90deg, var(--violet-700), var(--pink-700));
      box-shadow: 0 18px 40px rgba(124,58,237,.26);
      transform: translateY(-1px);
    }
    .openBtn:active{ transform: translateY(0px); }

    /* Modal (Preview do livro - layout id√™ntico) */
    .modal{
      position:fixed;
      inset:0;
      background: rgba(17,24,39,.55);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 999;
    }
    .modal.on{ display:flex; }

    .modalBox{
      width:min(1200px, 96vw);
      height: min(92vh, 860px);
      background: #fff;
      border-radius: 22px;
      overflow:hidden;
      box-shadow: 0 30px 90px rgba(0,0,0,.28);
      display:flex;
      flex-direction:column;
    }
    .modalTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 14px 14px;
      border-bottom: 1px solid rgba(17,24,39,.08);
      background: rgba(245,243,255,.65);
      flex: 0 0 auto;
    }
    .modalTop b{ font-weight:1000; }
    .close{
      border:0;
      cursor:pointer;
      border-radius: 999px;
      padding: 10px 12px;
      font-weight: 1000;
      background: rgba(255,255,255,.9);
      border: 1px solid rgba(221,214,254,.95);
    }
    .modalBody{
      flex: 1 1 auto;
      overflow:auto;
      background:
        radial-gradient(1200px 520px at 18% 0%, rgba(124,58,237,.18), transparent 60%),
        radial-gradient(980px 460px at 90% 12%, rgba(219,39,119,.14), transparent 58%),
        linear-gradient(180deg, var(--violet-50), var(--white) 46%, var(--pink-50));
    }

    /* Reveal */
    .reveal{
      opacity:0;
      transform: translateY(18px);
      transition: opacity .55s ease, transform .55s ease;
    }
    .reveal.on{
      opacity:1;
      transform: translateY(0);
    }

    /* Footer */
    .footer{
      padding: 26px 0 34px;
      background: #f8fafc;
      color: rgba(75,85,99,.9);
      text-align:center;
      font-weight: 750;
      font-size: 13px;
      border-top: 1px solid rgba(17,24,39,.06);
    }

    /* =========================
       PREVIEW (layout id√™ntico)
       ========================= */
    .pv-wrap{ max-width: 1180px; margin: 0 auto; padding: 18px 16px 26px; }

    .pv-head{
      background: rgba(255,255,255,.86);
      border: 1px solid rgba(17,24,39,.06);
      border-radius: 26px;
      box-shadow: 0 20px 60px rgba(17,24,39,.10);
      padding: 14px;
      display:flex;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-bottom: 14px;
      /* removido backdrop-filter para garantir zero blur */
    }
    .pv-ttl{
      font-weight:1000;
      font-size: 18px;
      color: var(--gray-900);
      letter-spacing:-.2px;
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .pv-meta{
      margin-top:6px;
      color: var(--gray-600);
      font-weight:850;
      line-height:1.6;
      font-size: 13px;
    }

    .pv-stage{
      position:relative;
      width: 100%;
      display:grid;
      place-items:center;
      margin-top: 14px;
    }

    .pv-book{
      width: min(1080px, calc(100vw - 18px));
      aspect-ratio: 1020 / 797;
      max-height: 72vh;
      min-height: 460px;
      position:relative;
    }

    /* glow sem blur (para n√£o afetar nada) */
    .pv-bgGlow{
      position:absolute;
      inset: -34px;
      border-radius: 52px;
      background:
        radial-gradient(900px 360px at 18% 0%, rgba(124,58,237,.22), transparent 60%),
        radial-gradient(820px 340px at 85% 20%, rgba(219,39,119,.18), transparent 55%),
        radial-gradient(700px 320px at 50% 92%, rgba(252,211,77,.14), transparent 60%),
        radial-gradient(1200px 700px at 50% 50%, rgba(17,24,39,.10), transparent 70%);
      opacity:.94;
      pointer-events:none;
    }

    /* ======= FECHADO ======= */
    .pv-closedWrap{
      position:absolute;
      inset: 0;
      display:grid;
      place-items:center;
      z-index: 40;
    }

    .pv-closedBook{
      width: auto;
      height: auto;
      aspect-ratio: 1020 / 797;
      position:relative;
      border-radius: 22px;
      box-shadow: 0 34px 120px rgba(17,24,39,.22);
      overflow:hidden;
      transform: translateY(-4px);
      cursor:pointer;
      isolation:isolate;
      background: #fff;
    }

    .pv-closedBook:hover{
      transform: translateY(-6px) scale(1.005);
      box-shadow: 0 40px 140px rgba(17,24,39,.26);
    }

    .pv-closedCoverImg{
      position:absolute;
      inset: 0;
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      /* removido filter para garantir nitidez m√°xima */
    }

    .pv-closedVarnish{
      position:absolute;
      inset:-45%;
      background: linear-gradient(110deg, transparent 38%, rgba(255,255,255,.25) 48%, transparent 62%);
      transform: translateX(-30%) rotate(8deg);
      opacity:.85;
      pointer-events:none;
      mix-blend-mode: screen;
      z-index:3;
    }

    .pv-closedVignette{
      position:absolute;
      inset:0;
      background:
        radial-gradient(1100px 540px at 50% 15%, rgba(255,255,255,.22), transparent 55%),
        radial-gradient(900px 520px at 50% 95%, rgba(17,24,39,.22), transparent 62%);
      opacity:.45;
      pointer-events:none;
      z-index:2;
    }

    .pv-closedSpine{
      position:absolute;
      top:0; bottom:0;
      right:0;
      width: 26px;
      background:
        linear-gradient(180deg, rgba(17,24,39,.28), rgba(17,24,39,.08), rgba(17,24,39,.24));
      opacity:.65;
      z-index:4;
      pointer-events:none;
    }

    .pv-closedPagesEdge{
      position:absolute;
      top: 10px;
      right: 26px;
      bottom: 10px;
      width: 18px;
      border-radius: 12px;
      background:
        repeating-linear-gradient(
          180deg,
          rgba(255,255,255,.96) 0px,
          rgba(255,255,255,.96) 3px,
          rgba(243,243,243,.96) 4px,
          rgba(255,255,255,.96) 7px
        );
      box-shadow:
        inset 0 0 0 1px rgba(17,24,39,.08),
        inset -10px 0 14px rgba(17,24,39,.10);
      z-index:4;
      pointer-events:none;
    }

    .pv-closedBorder{
      position:absolute;
      inset:0;
      border-radius: 22px;
      box-shadow: inset 0 0 0 1px rgba(17,24,39,.10);
      z-index:5;
      pointer-events:none;
    }

    .pv-closedHint{
      margin-top: 12px;
      font-weight: 950;
      color: rgba(75,85,99,.88);
      font-size: 13px;
      text-align:center;
      user-select:none;
    }

    /* ======= ABERTO ======= */
    .pv-openWrap{
      position:absolute;
      inset: 0;
      display:grid;
      place-items:center;
      z-index: 30;
    }

    .pv-spreadShell{
      position:absolute;
      inset: 0;
      border-radius: 36px;
      overflow:hidden;

      box-shadow:
        0 70px 180px rgba(17,24,39,.30),
        0 26px 54px rgba(17,24,39,.18),
        0 10px 20px rgba(124,58,237,.10);

      background: rgba(255,255,255,.10);
      border: 1px solid rgba(17,24,39,.06);

      /* removido perspective/rotate (pode suavizar imagem em alguns navegadores) */
      transform: none;
      transform-origin: 50% 60%;
    }

    .pv-spreadShell::before{
      content:"";
      position:absolute;
      inset: 10px;
      border-radius: 26px;
      pointer-events:none;
      box-shadow:
        inset 0 0 0 1px rgba(17,24,39,.07),
        inset 0 24px 50px rgba(255,255,255,.14),
        inset 0 -28px 60px rgba(0,0,0,.14);
      z-index:1;
    }

    /* removido overlay/texture por seguran√ßa (pode ‚Äúlavar‚Äù/suavizar o visual) */
    .pv-spreadShell::after{ content:none; }

    .pv-paperBase{
      position:absolute;
      inset: 10px;
      border-radius: 26px;
      background:
        radial-gradient(1200px 520px at 50% 0%, rgba(255,255,255,.70), transparent 56%),
        radial-gradient(900px 420px at 15% 10%, rgba(124,58,237,.10), transparent 60%),
        radial-gradient(900px 420px at 85% 15%, rgba(219,39,119,.08), transparent 55%),
        radial-gradient(1100px 460px at 50% 92%, rgba(17,24,39,.12), transparent 64%),
        rgba(255,255,255,.56);
      box-shadow: inset 0 0 0 1px rgba(17,24,39,.06);
      pointer-events:none;
      z-index:0;
    }

    .pv-paperGloss{
      position:absolute;
      inset: 10px;
      border-radius: 26px;
      background:
        linear-gradient(115deg, rgba(255,255,255,.24), transparent 45%),
        radial-gradient(900px 360px at 50% 0%, rgba(255,255,255,.20), transparent 62%);
      mix-blend-mode: screen;
      opacity:.82;
      pointer-events:none;
      z-index:3;
    }

    .pv-fold{
      position:absolute;
      top: 10px; bottom: 10px;
      left: 50%;
      width: clamp(18px, 2.4vw, 30px);
      transform: translateX(-50%);
      pointer-events:none;
      z-index: 40;
      background:
        radial-gradient(28px 720px at 50% 50%, rgba(0,0,0,.26), transparent 72%),
        linear-gradient(90deg, rgba(255,255,255,.02), rgba(255,255,255,.44), rgba(255,255,255,.02)),
        linear-gradient(90deg, rgba(0,0,0,.18), rgba(0,0,0,.02), rgba(0,0,0,.18));
      opacity:.76;
      /* removido blur */
    }
    .pv-fold::after{
      content:"";
      position:absolute;
      top: 0; bottom: 0;
      left: 50%;
      width: 2px;
      transform: translateX(-50%);
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.10), transparent);
      opacity:.55;
    }

    .pv-curveL, .pv-curveR{
      position:absolute;
      top: 14px;
      bottom: 14px;
      width: 19%;
      pointer-events:none;
      z-index: 30;
      border-radius: 26px;
    }
    .pv-curveL{
      left: calc(50% - 19%);
      background:
        radial-gradient(320px 720px at 100% 50%, rgba(0,0,0,.22), transparent 62%),
        radial-gradient(300px 640px at 100% 50%, rgba(255,255,255,.24), transparent 72%);
      opacity:.86;
    }
    .pv-curveR{
      right: calc(50% - 19%);
      background:
        radial-gradient(320px 720px at 0% 50%, rgba(0,0,0,.22), transparent 62%),
        radial-gradient(300px 640px at 0% 50%, rgba(255,255,255,.24), transparent 72%);
      opacity:.86;
    }

    .pv-edgeLeft, .pv-edgeRight{
      position:absolute;
      top: 12px;
      bottom: 12px;
      width: 16px;
      pointer-events:none;
      z-index: 35;
      opacity:.95;
    }
    .pv-edgeLeft{
      left: 10px;
      border-radius: 18px 0 0 18px;
      background:
        repeating-linear-gradient(
          180deg,
          rgba(255,255,255,.98) 0px,
          rgba(255,255,255,.98) 3px,
          rgba(243,243,243,.98) 4px,
          rgba(255,255,255,.98) 7px
        );
      box-shadow:
        inset 9px 0 16px rgba(0,0,0,.16),
        inset 0 0 0 1px rgba(17,24,39,.06);
    }
    .pv-edgeRight{
      right: 10px;
      border-radius: 0 18px 18px 0;
      background:
        repeating-linear-gradient(
          180deg,
          rgba(255,255,255,.98) 0px,
          rgba(255,255,255,.98) 3px,
          rgba(243,243,243,.98) 4px,
          rgba(255,255,255,.98) 7px
        );
      box-shadow:
        inset -9px 0 16px rgba(0,0,0,.16),
        inset 0 0 0 1px rgba(17,24,39,.06);
    }

    .pv-pages{
      position:absolute;
      inset: 10px;
      border-radius: 26px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 0px;
      padding: 18px;
      z-index: 20;
      background: transparent;
    }

    .pv-page{
      position:relative;
      overflow:hidden;
      border-radius: 18px;
      background:
        radial-gradient(1100px 600px at 50% 0%, rgba(255,255,255,.90), rgba(255,255,255,.66) 55%, rgba(255,255,255,.58)),
        linear-gradient(180deg, rgba(255,255,255,.80), rgba(255,255,255,.60));
      box-shadow:
        0 24px 60px rgba(17,24,39,.14),
        0 10px 24px rgba(17,24,39,.10),
        inset 0 0 0 1px rgba(17,24,39,.08),
        inset 0 18px 32px rgba(255,255,255,.18),
        inset 0 -22px 28px rgba(17,24,39,.10);
      /* removido transform/filters que podem suavizar a imagem */
      transform: none;
    }

    .pv-page.left{
      /* removido 3D rotateY */
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }
    .pv-page.right{
      /* removido 3D rotateY */
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    /* removidos overlays/texturas na p√°gina (podem ‚Äúlavar‚Äù/suavizar) */
    .pv-page::before{ content:none; }
    .pv-page.left::after{ content:none; }
    .pv-page.right::after{ content:none; }

    .pv-imgFrame{
      position:absolute;
      inset:0;
      overflow:hidden;
      z-index:4;
      display:flex;
      align-items:center;
      justify-content:center;
      background: transparent;
    }

    /* ‚úÖ removido COMPLETAMENTE o BG borrado (pv-imgBg) */

    .pv-imgFg{
      position: relative;
      z-index: 2;
      display:block;
      width: 100%;
      height: 100%;
      object-fit: contain;
      object-position: center;
      /* removidos drop-shadows via filter (podem reduzir nitidez em alguns browsers) */
    }

    .pv-blank{
      width:100%;
      height:100%;
      display:grid;
      place-items:center;
      color: rgba(107,114,128,.70);
      font-weight: 900;
      font-size: 14px;
      border-radius: 12px;
      background:
        repeating-linear-gradient(
          135deg,
          rgba(245,243,255,.85) 0px,
          rgba(245,243,255,.85) 12px,
          rgba(255,255,255,.85) 12px,
          rgba(255,255,255,.85) 24px
        );
      box-shadow: inset 0 0 0 1px rgba(17,24,39,.06);
    }

    .pv-pageLabel{
      position:absolute;
      left: 14px;
      bottom: 12px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(221,214,254,.90);
      color: rgba(75,85,99,.95);
      font-weight: 1000;
      font-size: 12px;
      box-shadow: 0 18px 44px rgba(17,24,39,.10);
      z-index:30;
      /* removido backdrop-filter */
    }

    .pv-hide{ display:none !important; }

    .pv-navBtn{
      position:absolute;
      top:50%;
      transform: translateY(-50%);
      width: 56px;
      height: 56px;
      border-radius: 999px;
      border: 1px solid rgba(221,214,254,.92);
      background: rgba(255,255,255,.72);
      box-shadow: 0 18px 50px rgba(17,24,39,.12);
      display:grid;
      place-items:center;
      cursor:pointer;
      user-select:none;
      font-weight: 1000;
      color: rgba(109,40,217,1);
      z-index: 200;
      /* removido backdrop-filter */
    }
    .pv-navBtn:hover{
      background: rgba(245,243,255,.92);
      border-color: rgba(196,181,253,.95);
      transform: translateY(-50%) scale(1.02);
    }
    .pv-navBtn:active{ transform: translateY(-50%) scale(.98); }
    .pv-navPrev{ left: -18px; }
    .pv-navNext{ right: -18px; }
    .pv-navBtn.disabled{ opacity:.45; pointer-events:none; }

    .pv-progress{
      margin-top: 12px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
      color: var(--gray-600);
      font-weight: 900;
      font-size: 13px;
      user-select:none;
    }
    .pv-dots{
      display:flex;
      gap:6px;
      align-items:center;
    }
    .pv-dot{
      width: 9px; height: 9px;
      border-radius: 999px;
      border: 1px solid rgba(221,214,254,.95);
      background: rgba(124,58,237,.14);
    }
    .pv-dot.on{ background: rgba(124,58,237,.75); }

    .pv-turnLayer{
      position:absolute;
      inset: 10px;
      z-index: 120;
      pointer-events:none;
      perspective: 1500px;
      border-radius: 26px;
    }
    .pv-turnSheet{
      position:absolute;
      top: 18px;
      bottom: 18px;
      width: calc(50% - 18px);
      border-radius: 18px;
      transform-style: preserve-3d;
      overflow: visible;
    }
    .pv-turnSheet.right{
      left: 50%;
      transform-origin: left center;
    }
    .pv-turnSheet.left{
      left: 18px;
      transform-origin: right center;
    }

    .pv-turnFace{
      position:absolute;
      inset:0;
      border-radius: 18px;
      overflow:hidden;
      background: transparent;
      backface-visibility: hidden;
    }
    .pv-turnFace.back{
      transform: rotateY(180deg);
    }

    .pv-turnShade{
      position:absolute;
      inset:-1px;
      border-radius: 20px;
      pointer-events:none;
      background:
        radial-gradient(closest-side, rgba(0,0,0,.26), transparent 70%),
        linear-gradient(90deg, rgba(0,0,0,.16), transparent 40%, rgba(0,0,0,.12));
      /* removido blur */
      opacity:0;
      transition: opacity .18s ease;
    }
    .pv-turnSheet.flipping .pv-turnShade{ opacity:.95; }

    @keyframes pvFlipNext{
      0%   { transform: rotateY(0deg); }
      100% { transform: rotateY(-180deg); }
    }
    @keyframes pvFlipPrev{
      0%   { transform: rotateY(0deg); }
      100% { transform: rotateY(180deg); }
    }

    @media (max-width: 860px){
      .pv-book{ min-height: 440px; }
      .pv-navPrev{ left: -10px; }
      .pv-navNext{ right: -10px; }
      .pv-pages{ padding: 14px; }
      .pv-turnSheet{ width: calc(50% - 14px); top: 14px; bottom: 14px; }
      .pv-turnSheet.left{ left: 14px; }
      :root{ --pad: 14px; }
    }
    @media (max-width: 520px){
      .pv-book{ min-height: 420px; }
      .pv-pages{ padding: 12px; }
      .pv-turnSheet{ width: calc(50% - 12px); top: 12px; bottom: 12px; }
      .pv-turnSheet.left{ left: 12px; }
      :root{ --pad: 12px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="nav">
      <div class="brand">
        <div class="logo">üìö</div>
        <div>Meu Livro M√°gico</div>
      </div>
      <div class="navRight">
        <a class="btn btnOutline" href="/sales" title="Voltar para a p√°gina inicial">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M15 18l-6-6 6-6" stroke="rgba(109,40,217,1)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Voltar
        </a>

        <a class="btn btnPrimary" href="/create" title="Criar agora">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M15 5l4 4" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <path d="M4 20l11-11" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <path d="M16 4l4 4" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <path d="M3 21l6-6" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Criar Livro
        </a>
      </div>
    </div>
  </div>

  <section class="hero">
    <div class="stars" id="stars"></div>

    <div class="wrap">
      <div class="head">
        <h1 class="h1 reveal" id="e1">
          <span>Exemplos de </span><span class="gradText">livros prontos</span>
        </h1>
        <p class="lead reveal" id="e2">
          Clique em <b>Abrir</b> para ver o livro no mesmo layout real do app (capa fechada + p√°ginas com efeito).
        </p>

        <div class="filters reveal" id="e3">
          <button class="pill active" data-filter="all">Tudo</button>
          <button class="pill" data-filter="read">Leitura</button>
          <button class="pill" data-filter="color">Leitura + Colorir</button>
        </div>
      </div>

      <div class="section">
        <div class="grid reveal" id="e4" aria-label="Galeria de exemplos">

          <!-- CARD 1 -->
          <div class="card" data-kind="read"
               data-title="A Miss√£o de Maria"
               data-cover="/examples/ex-space.jpg"
               data-pages="/examples/pages/space_p1.jpg,/examples/pages/space_p2.jpg,/examples/pages/space_p3.jpg,/examples/pages/space_p4.jpg,/examples/pages/space_p5.jpg,/examples/pages/space_p6.jpg,/examples/pages/space_p7.jpg,/examples/pages/space_p8.jpg">
            <div class="cover">
              <div class="tag">üöÄ Espa√ßo ‚Ä¢ Leitura</div>
              <img src="/examples/ex-space.jpg" alt="Capa exemplo espa√ßo">
            </div>
            <div class="body">
              <p class="title">A Miss√£o de Maria</p>
              <p class="meta">Livro colorido ‚Ä¢ Texto nas p√°ginas</p>
              <div class="openRow">
                <button class="openBtn" type="button">üëÄ Abrir</button>
              </div>
            </div>
          </div>

          <!-- CARD 2 -->
          <div class="card" data-kind="color"
               data-title="O Castelo do Drag√£o"
               data-cover="/examples/ex-dragon.jpg"
               data-pages="/examples/pages/dragon_p1.jpg,/examples/pages/dragon_p2.jpg,/examples/pages/dragon_p3.jpg,/examples/pages/dragon_p4.jpg,/examples/pages/dragon_p5.jpg,/examples/pages/dragon_p6.jpg,/examples/pages/dragon_p7.jpg,/examples/pages/dragon_p8.jpg">
            <div class="cover">
              <div class="tag">üêâ Drag√µes ‚Ä¢ Colorir</div>
              <img src="/examples/ex-dragon.jpg" alt="Capa exemplo drag√µes">
            </div>
            <div class="body">
              <p class="title">O Castelo do Drag√£o</p>
              <p class="meta">Leitura + p√°ginas P&B para colorir</p>
              <div class="openRow">
                <button class="openBtn" type="button">üëÄ Abrir</button>
              </div>
            </div>
          </div>

          <!-- CARD 3 -->
          <div class="card" data-kind="read"
               data-title="Um Dia no Oceano"
               data-cover="/examples/ex-ocean.jpg"
               data-pages="/examples/pages/ocean_p1.jpg,/examples/pages/ocean_p2.jpg,/examples/pages/ocean_p3.jpg,/examples/pages/ocean_p4.jpg,/examples/pages/ocean_p5.jpg,/examples/pages/ocean_p6.jpg,/examples/pages/ocean_p7.jpg,/examples/pages/ocean_p8.jpg">
            <div class="cover">
              <div class="tag">üåä Mar ‚Ä¢ Leitura</div>
              <img src="/examples/ex-ocean.jpg" alt="Capa exemplo oceano">
            </div>
            <div class="body">
              <p class="title">Um Dia no Oceano</p>
              <p class="meta">Ilustra√ß√µes coloridas ‚Ä¢ Texto nas p√°ginas</p>
              <div class="openRow">
                <button class="openBtn" type="button">üëÄ Abrir</button>
              </div>
            </div>
          </div>

          <!-- CARD 4 -->
          <div class="card" data-kind="read"
               data-title="Selva Encantada"
               data-cover="/examples/ex-jungle.jpg"
               data-pages="/examples/pages/jungle_p1.jpg,/examples/pages/jungle_p2.jpg,/examples/pages/jungle_p3.jpg,/examples/pages/jungle_p4.jpg,/examples/pages/jungle_p5.jpg,/examples/pages/jungle_p6.jpg,/examples/pages/jungle_p7.jpg,/examples/pages/jungle_p8.jpg">
            <div class="cover">
              <div class="tag">üåø Selva ‚Ä¢ Leitura</div>
              <img src="/examples/ex-jungle.jpg" alt="Capa exemplo selva">
            </div>
            <div class="body">
              <p class="title">Selva Encantada</p>
              <p class="meta">Aventura divertida ‚Ä¢ PDF para encadernar</p>
              <div class="openRow">
                <button class="openBtn" type="button">üëÄ Abrir</button>
              </div>
            </div>
          </div>

          <!-- CARD 5 -->
          <div class="card" data-kind="color"
               data-title="Super-Her√≥i do Dia"
               data-cover="/examples/ex-superhero.jpg"
               data-pages="/examples/pages/hero_p1.jpg,/examples/pages/hero_p2.jpg,/examples/pages/hero_p3.jpg,/examples/pages/hero_p4.jpg,/examples/pages/hero_p5.jpg,/examples/pages/hero_p6.jpg,/examples/pages/hero_p7.jpg,/examples/pages/hero_p8.jpg">
            <div class="cover">
              <div class="tag">ü¶∏ Hero ‚Ä¢ Colorir</div>
              <img src="/examples/ex-superhero.jpg" alt="Capa exemplo super-her√≥i">
            </div>
            <div class="body">
              <p class="title">Super-Her√≥i do Dia</p>
              <p class="meta">Leitura + Colorir ‚Ä¢ P&B para pintar</p>
              <div class="openRow">
                <button class="openBtn" type="button">üëÄ Abrir</button>
              </div>
            </div>
          </div>

          <!-- CARD 6 -->
          <div class="card" data-kind="read"
               data-title="Dinossauros Amigos"
               data-cover="/examples/ex-dino.jpg"
               data-pages="/examples/pages/dino_p1.jpg,/examples/pages/dino_p2.jpg,/examples/pages/dino_p3.jpg,/examples/pages/dino_p4.jpg,/examples/pages/dino_p5.jpg,/examples/pages/dino_p6.jpg,/examples/pages/dino_p7.jpg,/examples/pages/dino_p8.jpg">
            <div class="cover">
              <div class="tag">ü¶ñ Dino ‚Ä¢ Leitura</div>
              <img src="/examples/ex-dino.jpg" alt="Capa exemplo dinossauro">
            </div>
            <div class="body">
              <p class="title">Dinossauros Amigos</p>
              <p class="meta">Ilustrado ‚Ä¢ Hist√≥ria curtinha e encantadora</p>
              <div class="openRow">
                <button class="openBtn" type="button">üëÄ Abrir</button>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <!-- Modal Preview -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="Preview do exemplo">
    <div class="modalBox">
      <div class="modalTop">
        <b id="modalTitle">Exemplo</b>
        <button class="close" id="modalClose" type="button">Fechar ‚úï</button>
      </div>
      <div class="modalBody">
        <div id="modalMount"></div>
      </div>
    </div>
  </div>

  <footer class="footer">
    <div class="wrap">
      <p style="margin:0">Feito com üíú ‚Ä¢ <a href="/create" style="text-decoration:underline;">Abrir gerador</a></p>
    </div>
  </footer>

  <script>
    // Stars
    (function renderStars(){
      const root = document.getElementById("stars");
      const N = 20;
      function rnd(a,b){ return a + Math.random()*(b-a); }
      const starSvg = `
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 2l2.1 6.4L21 9.6l-5.4 4 2.1 6.4L12 16.2 6.3 20l2.1-6.4L3 9.6l6.9-1.2L12 2z"
            fill="rgba(252,211,77,.95)"/>
        </svg>`;
      for(let i=0;i<N;i++){
        const el = document.createElement("div");
        el.className = "star";
        el.style.top  = rnd(0, 100).toFixed(2) + "%";
        el.style.left = rnd(0, 100).toFixed(2) + "%";
        el.style.setProperty("--dur", rnd(3.2, 5.6).toFixed(2) + "s");
        el.style.animationDelay = rnd(0, 2.2).toFixed(2) + "s";
        el.innerHTML = starSvg;
        root.appendChild(el);
      }
    })();

    // Reveal
    (function reveal(){
      const els = Array.from(document.querySelectorAll(".reveal"));
      function inView(el){
        const r = el.getBoundingClientRect();
        return r.top < window.innerHeight * 0.92;
      }
      function tick(){
        els.forEach(el => {
          if(el.classList.contains("on")) return;
          if(inView(el)) el.classList.add("on");
        });
      }
      const staged = ["e1","e2","e3","e4"];
      staged.forEach((id, idx) => {
        const el = document.getElementById(id);
        if(el) setTimeout(() => el.classList.add("on"), 90 + idx*120);
      });
      window.addEventListener("scroll", tick, { passive:true });
      window.addEventListener("resize", tick);
      setTimeout(tick, 650);
    })();

    // Filter pills
    (function filters(){
      const pills = Array.from(document.querySelectorAll(".pill"));
      const cards = Array.from(document.querySelectorAll(".card"));
      pills.forEach(p => p.addEventListener("click", () => {
        pills.forEach(x => x.classList.remove("active"));
        p.classList.add("active");
        const f = p.getAttribute("data-filter");
        cards.forEach(c => {
          const kind = c.getAttribute("data-kind");
          c.style.display = (f === "all" || f === kind) ? "" : "none";
        });
      }));
    })();

    // ===========================
    // PREVIEW engine (id√™ntico)
    // ===========================
    (function previewModal(){
      const modal = document.getElementById("modal");
      const mount = document.getElementById("modalMount");
      const titleEl = document.getElementById("modalTitle");
      const closeBtn = document.getElementById("modalClose");

      let state = null;

      function escHtml(s){
        return String(s ?? "")
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#39;");
      }

      function buildPreviewDOM(opts){
        // opts: { title, coverUrl, pages: [url...] }
        const bookTitle = String(opts.title || "Exemplo");
        const coverUrl = String(opts.coverUrl || "");
        const pageUrls = Array.isArray(opts.pages) ? opts.pages.filter(Boolean) : [];

        // p√°ginas como itens (imagem) + completa par
        const pages = pageUrls.map((url, i) => ({
          kind: "image",
          url: String(url),
          label: "P√°gina " + (i + 1),
          pageNum: i + 1
        }));
        if(pages.length % 2 !== 0) pages.push({ kind:"blank", label:"", pageNum:null });

        const spreadCount = Math.max(1, Math.ceil(pages.length / 2));

        mount.innerHTML = `
          <div class="pv-wrap">
            <div class="pv-head">
              <div>
                <div class="pv-ttl">üìò ${escHtml(bookTitle)}</div>
                <div class="pv-meta">
                  Preview de exemplo ‚Ä¢ Come√ßa FECHADO (capa) ‚Ä¢ (‚Üí abre) ‚Ä¢ ESC fecha
                </div>
              </div>
            </div>

            <div class="pv-stage">
              <div class="pv-book" id="pv_book">
                <div class="pv-bgGlow"></div>

                <!-- FECHADO -->
                <div class="pv-closedWrap" id="pv_closedWrap">
                  <div class="pv-closedBook" id="pv_closedBook" title="Clique para abrir">
                    <img class="pv-closedCoverImg" id="pv_closedCoverImg" alt="Capa"/>
                    <div class="pv-closedVarnish"></div>
                    <div class="pv-closedVignette"></div>
                    <div class="pv-closedPagesEdge"></div>
                    <div class="pv-closedSpine"></div>
                    <div class="pv-closedBorder"></div>
                  </div>
                  <div class="pv-closedHint">Clique na capa para abrir ‚Ä¢ (‚Üí para abrir) ‚Ä¢ ESC fecha</div>
                </div>

                <!-- ABERTO -->
                <div class="pv-openWrap pv-hide" id="pv_openWrap">
                  <div class="pv-spreadShell" id="pv_spreadShell">
                    <div class="pv-paperBase"></div>
                    <div class="pv-paperGloss"></div>

                    <div class="pv-pages" id="pv_pagesGrid">
                      <div class="pv-page left">
                        <div class="pv-imgFrame" id="pv_pageLeft"></div>
                        <div class="pv-pageLabel" id="pv_labelLeft"></div>
                      </div>
                      <div class="pv-page right">
                        <div class="pv-imgFrame" id="pv_pageRight"></div>
                        <div class="pv-pageLabel" id="pv_labelRight"></div>
                      </div>
                    </div>

                    <div class="pv-fold"></div>
                    <div class="pv-curveL"></div>
                    <div class="pv-curveR"></div>
                    <div class="pv-edgeLeft"></div>
                    <div class="pv-edgeRight"></div>

                    <div class="pv-turnLayer" id="pv_turnLayer"></div>
                  </div>
                </div>

                <button class="pv-navBtn pv-navPrev" id="pv_prevBtn" type="button">‚Üê</button>
                <button class="pv-navBtn pv-navNext" id="pv_nextBtn" type="button">‚Üí</button>
              </div>

              <div class="pv-progress">
                <span id="pv_progressText"></span>
                <span class="pv-dots" id="pv_dots"></span>
              </div>
            </div>
          </div>
        `;

        // engine
        const $ = (id) => mount.querySelector("#" + id);

        function getCssPxVar(name, fallback){
          try{
            var v = getComputedStyle(document.documentElement).getPropertyValue(name);
            var n = parseFloat(String(v).trim());
            return isFinite(n) ? n : fallback;
          }catch(e){
            return fallback;
          }
        }

        function syncClosedBookToSinglePage(){
          const bookEl = $("pv_book");
          const closedEl = $("pv_closedBook");
          if(!bookEl || !closedEl) return;

          const W = bookEl.clientWidth || 0;
          const H = bookEl.clientHeight || 0;
          if(W <= 0 || H <= 0) return;

          const inset = 10;
          const pad = getCssPxVar("--pad", 18);

          const innerW = Math.max(0, W - inset*2 - pad*2);
          const innerH = Math.max(0, H - inset*2 - pad*2);

          const pageW = Math.max(0, innerW / 2);
          const pageH = Math.max(0, innerH);

          closedEl.style.width = pageW.toFixed(2) + "px";
          closedEl.style.height = pageH.toFixed(2) + "px";
        }

        let view = "closed";
        let openSpreadIndex = 0;
        let animating = false;

        function setView(nextView){
          view = nextView;
          const closed = $("pv_closedWrap");
          const open = $("pv_openWrap");
          if(closed) closed.classList.toggle("pv-hide", view !== "closed");
          if(open) open.classList.toggle("pv-hide", view !== "open");
          setBtnState();
          render();
          if(view === "closed"){
            setTimeout(syncClosedBookToSinglePage, 0);
          }
        }

        function setBtnState(){
          const prev = $("pv_prevBtn");
          const next = $("pv_nextBtn");

          if(animating){
            if(prev) prev.classList.add("disabled");
            if(next) next.classList.add("disabled");
            return;
          }

          if(view === "closed"){
            if(prev) prev.classList.add("disabled");
            if(next) next.classList.remove("disabled");
            return;
          }

          if(prev) prev.classList.remove("disabled");
          if(next) next.classList.toggle("disabled", openSpreadIndex >= spreadCount - 1);
        }

        function renderCoverClosed(){
          const img = $("pv_closedCoverImg");
          if(!img) return;
          if(!coverUrl){
            img.removeAttribute("src");
            img.style.display = "none";
            return;
          }
          img.style.display = "block";
          if(img.getAttribute("src") !== coverUrl) img.src = coverUrl;
        }

        function renderSlot(root, item){
          if(!root) return;
          root.innerHTML = "";

          if(!item || item.kind === "blank" || !item.url){
            const d = document.createElement("div");
            d.className = "pv-blank";
            d.textContent = "";
            root.appendChild(d);
            return;
          }

          // ‚úÖ SOMENTE a imagem ‚ÄúFG‚Äù (sem BG borrado / sem filters)
          const fg = document.createElement("img");
          fg.className = "pv-imgFg";
          fg.src = item.url;
          fg.alt = item.label || "P√°gina";
          root.appendChild(fg);
        }

        function setLabel(el, item){
          if(!el) return;
          el.textContent = item && item.label ? item.label : "";
          el.style.display = el.textContent ? "inline-flex" : "none";
        }

        function renderDots(){
          const root = $("pv_dots");
          if(!root) return;

          const totalDots = spreadCount;
          const active = (view === "closed") ? 0 : openSpreadIndex;

          let html = "";
          for(let i=0;i<totalDots;i++){
            html += '<span class="pv-dot' + (i===active ? ' on' : '') + '"></span>';
          }
          root.innerHTML = html;
        }

        function getSpreadItems(idx){
          const leftIdx = idx * 2;
          const rightIdx = leftIdx + 1;
          return {
            left: pages[leftIdx] || { kind:"blank", label:"", pageNum:null },
            right: pages[rightIdx] || { kind:"blank", label:"", pageNum:null }
          };
        }

        function render(){
          renderCoverClosed();
          setBtnState();
          renderDots();

          const txt = $("pv_progressText");
          if(view === "closed"){
            if(txt) txt.textContent = "Livro fechado ‚Ä¢ (‚Üí para abrir)";
            return;
          }

          const it = getSpreadItems(openSpreadIndex);
          renderSlot($("pv_pageLeft"), it.left);
          renderSlot($("pv_pageRight"), it.right);
          setLabel($("pv_labelLeft"), it.left);
          setLabel($("pv_labelRight"), it.right);

          if(txt){
            txt.textContent = "Folha " + (openSpreadIndex + 1) + " de " + spreadCount + " ‚Ä¢ (‚Üê ‚Üí teclado / swipe / bot√µes)";
          }
        }

        function showCover(){
          animating = false;
          openSpreadIndex = 0;
          setView("closed");
        }

        function openBook(){
          openSpreadIndex = Math.max(0, Math.min(openSpreadIndex, spreadCount - 1));
          setView("open");
        }

        function closeBook(){
          showCover();
        }

        function buildFaceNode(item){
          const frame = document.createElement("div");
          frame.className = "pv-imgFrame";

          if(!item || item.kind === "blank" || !item.url){
            const d = document.createElement("div");
            d.className = "pv-blank";
            d.textContent = "";
            frame.appendChild(d);
            return frame;
          }

          // ‚úÖ SOMENTE a imagem ‚ÄúFG‚Äù (sem BG borrado / sem filters)
          const fg = document.createElement("img");
          fg.className = "pv-imgFg";
          fg.src = item.url;
          fg.alt = item.label || "P√°gina";
          frame.appendChild(fg);

          return frame;
        }

        function doFlip(direction){
          if(animating) return;

          if(view === "closed"){
            if(direction === "next") openBook();
            return;
          }

          if(direction !== "next" && openSpreadIndex <= 0){
            closeBook();
            return;
          }

          const nextIndex = openSpreadIndex + (direction === "next" ? 1 : -1);
          if(direction === "next"){
            if(openSpreadIndex >= spreadCount - 1) return;
          } else {
            if(openSpreadIndex <= 0){
              closeBook();
              return;
            }
          }

          const turnLayer = $("pv_turnLayer");
          if(!turnLayer){
            openSpreadIndex = nextIndex;
            render();
            return;
          }

          animating = true;
          setBtnState();
          turnLayer.innerHTML = "";

          const cur = getSpreadItems(openSpreadIndex);
          const nxt = getSpreadItems(nextIndex);

          const sheet = document.createElement("div");
          sheet.className = "pv-turnSheet " + (direction === "next" ? "right" : "left") + " flipping";

          const shade = document.createElement("div");
          shade.className = "pv-turnShade";

          const faceFront = document.createElement("div");
          faceFront.className = "pv-turnFace front";

          const faceBack = document.createElement("div");
          faceBack.className = "pv-turnFace back";

          const frontItem = (direction === "next") ? cur.right : cur.left;
          const backItem  = (direction === "next") ? nxt.left  : nxt.right;

          faceFront.appendChild(buildFaceNode(frontItem));
          faceBack.appendChild(buildFaceNode(backItem));

          sheet.appendChild(faceFront);
          sheet.appendChild(faceBack);
          sheet.appendChild(shade);
          turnLayer.appendChild(sheet);

          const dur = 520;
          sheet.style.animation =
            (direction === "next" ? "pvFlipNext" : "pvFlipPrev") + " " + dur + "ms ease-in-out forwards";

          setTimeout(function(){
            openSpreadIndex = nextIndex;
            render();
            animating = false;
            if(turnLayer) turnLayer.innerHTML = "";
            setBtnState();
            renderDots();
          }, dur + 20);
        }

        function prev(){ doFlip("prev"); }
        function next(){ doFlip("next"); }

        const prevBtn = $("pv_prevBtn");
        const nextBtn = $("pv_nextBtn");
        if(prevBtn) prevBtn.addEventListener("click", prev);
        if(nextBtn) nextBtn.addEventListener("click", next);

        const cb = $("pv_closedBook");
        if(cb) cb.addEventListener("click", openBook);

        function onKey(e){
          if(!modal.classList.contains("on")) return;
          if(e.key === "ArrowLeft") prev();
          if(e.key === "ArrowRight") next();
          if(e.key === "Escape") closeBook();
        }

        function onResize(){
          if(view === "closed") syncClosedBookToSinglePage();
        }

        // swipe
        (function swipe(){
          const el = $("pv_book");
          if(!el) return;
          let x0 = 0, y0 = 0, t0 = 0;

          el.addEventListener("touchstart", function(e){
            const t = e.touches && e.touches[0];
            if(!t) return;
            x0 = t.clientX; y0 = t.clientY; t0 = Date.now();
          }, { passive:true });

          el.addEventListener("touchend", function(e){
            const t = e.changedTouches && e.changedTouches[0];
            if(!t) return;
            const dx = t.clientX - x0;
            const dy = t.clientY - y0;
            const dt = Date.now() - t0;

            if(dt > 900) return;
            if(Math.abs(dx) < 55) return;
            if(Math.abs(dy) > 90) return;

            if(dx > 0) prev(); else next();
          }, { passive:true });
        })();

        // init
        renderCoverClosed();
        setView("closed");
        setTimeout(syncClosedBookToSinglePage, 0);

        return {
          destroy(){
            window.removeEventListener("keydown", onKey);
            window.removeEventListener("resize", onResize);
          },
          bind(){
            window.addEventListener("keydown", onKey);
            window.addEventListener("resize", onResize);
          }
        };
      }

      function openFromCard(card){
        const t = card.getAttribute("data-title") || "Exemplo";
        const cover = card.getAttribute("data-cover") || "";
        const pages = (card.getAttribute("data-pages") || "")
          .split(",").map(s => s.trim()).filter(Boolean);

        titleEl.textContent = t;

        // limpa anterior
        if(state && state.destroy) state.destroy();
        mount.innerHTML = "";

        // cria preview id√™ntico
        state = buildPreviewDOM({ title: t, coverUrl: cover, pages });
        if(state && state.bind) state.bind();

        modal.classList.add("on");
        // scroll topo do modal
        modal.querySelector(".modalBody").scrollTop = 0;
      }

      function close(){
        modal.classList.remove("on");
        if(state && state.destroy) state.destroy();
        state = null;
        mount.innerHTML = "";
      }

      // bind bot√µes Abrir
      document.querySelectorAll(".openBtn").forEach(btn => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();
          const card = btn.closest(".card");
          if(card) openFromCard(card);
        });
      });

      // opcional: clicar no card inteiro tamb√©m abre (duplo clique)
      document.querySelectorAll(".card").forEach(card => {
        card.addEventListener("dblclick", () => openFromCard(card));
      });

      closeBtn.addEventListener("click", close);
      modal.addEventListener("click", (e) => {
        if(e.target === modal) close();
      });
      window.addEventListener("keydown", (e) => {
        if(e.key === "Escape" && modal.classList.contains("on")) close();
      });
    })();
  </script>
</body>
</html>